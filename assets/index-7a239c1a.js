import{X as Ae,V as $e,r,h as F,y as m,D as ae,P as Je,a6 as Ye,N as ke,w as Qe,x as j,a2 as Ze,a0 as et,J as tt,K as _e,C as nt,S as rt,a7 as Me}from"./index-42a4afd0.js";import{K as re}from"./KeyCode-6413d982.js";import{w as at}from"./index-b5c30253.js";import{D as it}from"./index-5763a348.js";function ce(){return typeof BigInt=="function"}function X(e){var n=e.trim(),t=n.startsWith("-");t&&(n=n.slice(1)),n=n.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),n.startsWith(".")&&(n="0".concat(n));var a=n||"0",i=a.split("."),l=i[0]||"0",d=i[1]||"0";l==="0"&&d==="0"&&(t=!1);var v=t?"-":"";return{negative:t,negativeStr:v,trimStr:a,integerStr:l,decimalStr:d,fullStr:"".concat(v).concat(a)}}function de(e){var n=String(e);return!Number.isNaN(Number(n))&&n.includes("e")}function J(e){var n=String(e);if(de(e)){var t=Number(n.slice(n.indexOf("e-")+2)),a=n.match(/\.(\d+)/);return a!=null&&a[1]&&(t+=a[1].length),t}return n.includes(".")&&me(n)?n.length-n.indexOf(".")-1:0}function ve(e){var n=String(e);if(de(e)){if(e>Number.MAX_SAFE_INTEGER)return String(ce()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(ce()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);n=e.toFixed(J(n))}return X(n).fullStr}function me(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}var ut=function(){function e(n){if($e(this,e),this.origin="",this.number=void 0,this.empty=void 0,!n&&n!==0||!String(n).trim()){this.empty=!0;return}this.origin=String(n),this.number=Number(n)}return Ae(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var a=Number(t);if(Number.isNaN(a))return this;var i=this.number+a;if(i>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var l=Math.max(J(this.number),J(a));return new e(i.toFixed(l))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(t==null?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":ve(this.number):this.origin}}]),e}(),ot=function(){function e(n){if($e(this,e),this.origin="",this.negative=void 0,this.integer=void 0,this.decimal=void 0,this.decimalLen=void 0,this.empty=void 0,this.nan=void 0,!n&&n!==0||!String(n).trim()){this.empty=!0;return}if(this.origin=String(n),n==="-"){this.nan=!0;return}var t=n;if(de(t)&&(t=Number(t)),t=typeof t=="string"?t:ve(t),me(t)){var a=X(t);this.negative=a.negative;var i=a.trimStr.split(".");this.integer=BigInt(i[0]);var l=i[1]||"0";this.decimal=BigInt(l),this.decimalLen=l.length}else this.nan=!0}return Ae(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var a="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(a)}},{key:"negate",value:function(){var t=new e(this.toString());return t.negative=!t.negative,t}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var a=new e(t);if(a.isInvalidate())return this;var i=Math.max(this.getDecimalStr().length,a.getDecimalStr().length),l=this.alignDecimal(i),d=a.alignDecimal(i),v=(l+d).toString(),p=X(v),b=p.negativeStr,g=p.trimStr,h="".concat(b).concat(g.padStart(i+1,"0"));return new e("".concat(h.slice(0,-i),".").concat(h.slice(-i)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(t==null?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":X("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}();function D(e){return ce()?new ot(e):new ut(e)}function fe(e,n,t){if(e==="")return"";var a=X(e),i=a.negativeStr,l=a.integerStr,d=a.decimalStr,v="".concat(n).concat(d),p="".concat(i).concat(l);if(t>=0){var b=Number(d[t]);if(b>=5){var g=D(e).add("".concat(i,"0.").concat("0".repeat(t)).concat(10-b));return fe(g.toString(),n,t)}return t===0?p:"".concat(p).concat(n).concat(d.padEnd(t,"0").slice(0,t))}return v===".0"?p:"".concat(p).concat(v)}var lt=200,st=600;function ct(e){var n=e.prefixCls,t=e.upNode,a=e.downNode,i=e.upDisabled,l=e.downDisabled,d=e.onStep,v=r.useRef(),p=r.useRef();p.current=d;var b=function(E,U){E.preventDefault(),p.current(U);function M(){p.current(U),v.current=setTimeout(M,lt)}v.current=setTimeout(M,st)},g=function(){clearTimeout(v.current)};if(r.useEffect(function(){return g},[]),at())return null;var h="".concat(n,"-handler"),N=F(h,"".concat(h,"-up"),m({},"".concat(h,"-up-disabled"),i)),C=F(h,"".concat(h,"-down"),m({},"".concat(h,"-down-disabled"),l)),_={unselectable:"on",role:"button",onMouseUp:g,onMouseLeave:g};return r.createElement("div",{className:"".concat(h,"-wrap")},r.createElement("span",ae({},_,{onMouseDown:function(E){b(E,!0)},"aria-label":"Increase Value","aria-disabled":i,className:N}),t||r.createElement("span",{unselectable:"on",className:"".concat(n,"-handler-up-inner")})),r.createElement("span",ae({},_,{onMouseDown:function(E){b(E,!1)},"aria-label":"Decrease Value","aria-disabled":l,className:C}),a||r.createElement("span",{unselectable:"on",className:"".concat(n,"-handler-down-inner")})))}function ft(e,n){var t=r.useRef(null);function a(){try{var l=e.selectionStart,d=e.selectionEnd,v=e.value,p=v.substring(0,l),b=v.substring(d);t.current={start:l,end:d,value:v,beforeTxt:p,afterTxt:b}}catch{}}function i(){if(e&&t.current&&n)try{var l=e.value,d=t.current,v=d.beforeTxt,p=d.afterTxt,b=d.start,g=l.length;if(l.endsWith(p))g=l.length-t.current.afterTxt.length;else if(l.startsWith(v))g=v.length;else{var h=v[b-1],N=l.indexOf(h,b-1);N!==-1&&(g=N+1)}e.setSelectionRange(g,g)}catch(C){Je(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(C.message))}}return[a,i]}var dt=Ye()?r.useLayoutEffect:r.useEffect;function se(e,n){var t=r.useRef(!1);dt(function(){if(!t.current){t.current=!0;return}return e()},n)}const vt=function(){var e=r.useRef(0),n=function(){ke.cancel(e.current)};return r.useEffect(function(){return n},[]),function(t){n(),e.current=ke(function(){t()})}};var mt=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","controls","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep"],Ve=function(n,t){return n||t.isEmpty()?t.toString():t.toNumber()},Oe=function(n){var t=D(n);return t.isInvalidate()?null:t},Ue=r.forwardRef(function(e,n){var t,a=e.prefixCls,i=a===void 0?"rc-input-number":a,l=e.className,d=e.style,v=e.min,p=e.max,b=e.step,g=b===void 0?1:b,h=e.defaultValue,N=e.value,C=e.disabled,_=e.readOnly,I=e.upHandler,E=e.downHandler,U=e.keyboard,M=e.controls,Y=M===void 0?!0:M,B=e.stringMode,P=e.parser,s=e.formatter,T=e.precision,V=e.decimalSeparator,q=e.onChange,z=e.onInput,R=e.onPressEnter,y=e.onStep,ie=Qe(e,mt),O="".concat(i,"-input"),A=r.useRef(null),Q=r.useState(!1),Z=j(Q,2),ee=Z[0],te=Z[1],k=r.useRef(!1),$=r.useRef(!1),K=r.useState(function(){return D(N??h)}),w=j(K,2),S=w[0],ge=w[1];function Be(o){N===void 0&&ge(o)}var ue=r.useCallback(function(o,u){if(!u)return T>=0?T:Math.max(J(o),J(g))},[T,g]),oe=r.useCallback(function(o){var u=String(o);if(P)return P(u);var f=u;return V&&(f=f.replace(V,".")),f.replace(/[^\w.-]+/g,"")},[P,V]),pe=r.useRef(""),Se=r.useCallback(function(o,u){if(s)return s(o,{userTyping:u,input:String(pe.current)});var f=typeof o=="number"?ve(o):o;if(!u){var c=ue(f,u);if(me(f)&&(V||c>=0)){var x=V||".";f=fe(f,x,c)}}return f},[s,ue,V]),Pe=r.useState(function(){var o=h??N;return S.isInvalidate()&&["string","number"].includes(Ze(o))?Number.isNaN(o)?"":o:Se(S.toString(),!1)}),he=j(Pe,2),G=he[0],Ne=he[1];pe.current=G;function W(o,u){Ne(Se(o.isInvalidate()?o.toString(!1):o.toString(!u),u))}var L=r.useMemo(function(){return Oe(p)},[p]),H=r.useMemo(function(){return Oe(v)},[v]),be=r.useMemo(function(){return!L||!S||S.isInvalidate()?!1:L.lessEquals(S)},[L,S]),ye=r.useMemo(function(){return!H||!S||S.isInvalidate()?!1:S.lessEquals(H)},[H,S]),Te=ft(A.current,ee),Ee=j(Te,2),qe=Ee[0],Le=Ee[1],Ie=function(u){return L&&!u.lessEquals(L)?L:H&&!H.lessEquals(u)?H:null},we=function(u){return!Ie(u)},le=function(u,f){var c=u,x=we(c)||c.isEmpty();if(!c.isEmpty()&&!f&&(c=Ie(c)||c,x=!0),!_&&!C&&x){var ne=c.toString(),Re=ue(ne,f);return Re>=0&&(c=D(fe(ne,".",Re))),c.equals(S)||(Be(c),q==null||q(c.isEmpty()?null:Ve(B,c)),N===void 0&&W(c,f)),c}return S},He=vt(),xe=function o(u){if(qe(),Ne(u),!$.current){var f=oe(u),c=D(f);c.isNaN()||le(c,!0)}z==null||z(u),He(function(){var x=u;P||(x=u.replace(/ã€‚/g,".")),x!==u&&o(x)})},ze=function(){$.current=!0},Ke=function(){$.current=!1,xe(A.current.value)},Ge=function(u){xe(u.target.value)},De=function(u){var f;if(!(u&&be||!u&&ye)){k.current=!1;var c=D(g);u||(c=c.negate());var x=(S||D(0)).add(c.toString()),ne=le(x,!1);y==null||y(Ve(B,ne),{offset:g,type:u?"up":"down"}),(f=A.current)===null||f===void 0||f.focus()}},Ce=function(u){var f=D(oe(G)),c=f;f.isNaN()?c=S:c=le(f,u),N!==void 0?W(S,!1):c.isNaN()||W(c,!1)},We=function(u){var f=u.which;k.current=!0,f===re.ENTER&&($.current||(k.current=!1),Ce(!1),R==null||R(u)),U!==!1&&!$.current&&[re.UP,re.DOWN].includes(f)&&(De(re.UP===f),u.preventDefault())},je=function(){k.current=!1},Xe=function(){Ce(!1),te(!1),k.current=!1};return se(function(){S.isInvalidate()||W(S,!1)},[T]),se(function(){var o=D(N);ge(o);var u=D(oe(G));(!o.equals(u)||!k.current||s)&&W(o,k.current)},[N]),se(function(){s&&Le()},[G]),r.createElement("div",{className:F(i,l,(t={},m(t,"".concat(i,"-focused"),ee),m(t,"".concat(i,"-disabled"),C),m(t,"".concat(i,"-readonly"),_),m(t,"".concat(i,"-not-a-number"),S.isNaN()),m(t,"".concat(i,"-out-of-range"),!S.isInvalidate()&&!we(S)),t)),style:d,onFocus:function(){te(!0)},onBlur:Xe,onKeyDown:We,onKeyUp:je,onCompositionStart:ze,onCompositionEnd:Ke},Y&&r.createElement(ct,{prefixCls:i,upNode:I,downNode:E,upDisabled:be,downDisabled:ye,onStep:De}),r.createElement("div",{className:"".concat(O,"-wrap")},r.createElement("input",ae({autoComplete:"off",role:"spinbutton","aria-valuemin":v,"aria-valuemax":p,"aria-valuenow":S.isInvalidate()?null:S.toString(),step:g},ie,{ref:et(A,n),className:O,value:G,onChange:Ge,disabled:C,readOnly:_}))))});Ue.displayName="InputNumber";var gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};const pt=gt;var Fe=function(n,t){return r.createElement(tt,_e(_e({},n),{},{ref:t,icon:pt}))};Fe.displayName="UpOutlined";const St=r.forwardRef(Fe);var ht=globalThis&&globalThis.__rest||function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)n.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(t[a[i]]=e[a[i]]);return t},Nt=r.forwardRef(function(e,n){var t,a=r.useContext(nt),i=a.getPrefixCls,l=a.direction,d=r.useContext(rt),v=r.useState(!1),p=j(v,2),b=p[0],g=p[1],h=r.useRef(null);r.useImperativeHandle(n,function(){return h.current});var N=e.className,C=e.size,_=e.prefixCls,I=e.addonBefore,E=e.addonAfter,U=e.prefix,M=e.bordered,Y=M===void 0?!0:M,B=e.readOnly,P=ht(e,["className","size","prefixCls","addonBefore","addonAfter","prefix","bordered","readOnly"]),s=i("input-number",_),T=r.createElement(St,{className:"".concat(s,"-handler-up-inner")}),V=r.createElement(it,{className:"".concat(s,"-handler-down-inner")}),q=C||d,z=F((t={},m(t,"".concat(s,"-lg"),q==="large"),m(t,"".concat(s,"-sm"),q==="small"),m(t,"".concat(s,"-rtl"),l==="rtl"),m(t,"".concat(s,"-readonly"),B),m(t,"".concat(s,"-borderless"),!Y),t),N),R=r.createElement(Ue,ae({ref:h,className:z,upHandler:T,downHandler:V,prefixCls:s,readOnly:B},P));if(U!=null){var y,ie=F("".concat(s,"-affix-wrapper"),(y={},m(y,"".concat(s,"-affix-wrapper-focused"),b),m(y,"".concat(s,"-affix-wrapper-disabled"),e.disabled),m(y,"".concat(s,"-affix-wrapper-sm"),d==="small"),m(y,"".concat(s,"-affix-wrapper-lg"),d==="large"),m(y,"".concat(s,"-affix-wrapper-rtl"),l==="rtl"),m(y,"".concat(s,"-affix-wrapper-readonly"),B),m(y,"".concat(s,"-affix-wrapper-borderless"),!Y),m(y,"".concat(N),!(I||E)&&N),y));R=r.createElement("div",{className:ie,style:e.style,onMouseUp:function(){return h.current.focus()}},r.createElement("span",{className:"".concat(s,"-prefix")},U),Me(R,{style:null,value:e.value,onFocus:function(K){var w;g(!0),(w=e.onFocus)===null||w===void 0||w.call(e,K)},onBlur:function(K){var w;g(!1),(w=e.onBlur)===null||w===void 0||w.call(e,K)}}))}if(I!=null||E!=null){var O,A="".concat(s,"-group"),Q="".concat(A,"-addon"),Z=I?r.createElement("div",{className:Q},I):null,ee=E?r.createElement("div",{className:Q},E):null,te=F("".concat(s,"-wrapper"),A,m({},"".concat(A,"-rtl"),l==="rtl")),k=F("".concat(s,"-group-wrapper"),(O={},m(O,"".concat(s,"-group-wrapper-sm"),d==="small"),m(O,"".concat(s,"-group-wrapper-lg"),d==="large"),m(O,"".concat(s,"-group-wrapper-rtl"),l==="rtl"),O),N);R=r.createElement("div",{className:k,style:e.style},r.createElement("div",{className:te},Z,Me(R,{style:null}),ee))}return R});const wt=Nt;export{wt as I};
