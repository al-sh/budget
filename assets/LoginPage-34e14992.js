import{a as u,r as l,U as g,I as m,j as e,B as h,H as x}from"./index-42a4afd0.js";import{g as j,A as I}from"./Api-477fc52a.js";import{F as a}from"./index-b5c30253.js";import{I as p}from"./index-b0aedb36.js";import"./useMergedState-58b942e0.js";const C=()=>{const r=j(),t=x(),n=u(),d=l.useCallback(async o=>{var i;try{const s=await r.send({data:o,endpoint:I.AUTH+"/password",method:"POST"});console.log("response: ",s),t.setItem("token",s.token),t.setItem("userId",String(s.userId)),n(g.HOME)}catch(s){((i=s==null?void 0:s.response)==null?void 0:i.status)===403?m.error({message:"Неправильный логин/пароль"}):m.error({message:"Произошла ошибка авторизации. Повторите попытку позже."})}},[r,n,t]),c=l.useCallback(o=>{console.log("Failed:",o)},[]);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Login"}),e.jsx("div",{style:{width:500},children:e.jsxs(a,{name:"basic",labelCol:{span:8},layout:"vertical",wrapperCol:{span:16},initialValues:{login:"demo",password:"demo"},onFinish:d,onFinishFailed:c,autoComplete:"off",children:[e.jsx(a.Item,{label:"Логин",name:"login",rules:[{message:"Введите логин",required:!0}],children:e.jsx(p,{})}),e.jsx(a.Item,{label:"Пароль",name:"password",rules:[{message:"Введите пароль",required:!0}],children:e.jsx(p.Password,{})}),e.jsx(a.Item,{wrapperCol:{offset:8,span:16},children:e.jsx(h,{type:"primary",htmlType:"submit",children:"Вход"})})]})})]})};export{C as LoginPage,C as default};
