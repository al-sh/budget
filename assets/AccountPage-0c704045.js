import{u as d,a as c,U as l,j as s,f as u,B as x,b as p,L as j}from"./index-42a4afd0.js";import{F as h}from"./FormHeader-b04ff8d9.js";import{A as f}from"./AccountIconSelect-aa0b9490.js";import{F as t}from"./index-b5c30253.js";import{I as m}from"./index-b0aedb36.js";import{C as I}from"./index-eb228f41.js";import"./index-5763a348.js";import"./useMergedState-58b942e0.js";import"./KeyCode-6413d982.js";const C=({account:e})=>{const{useItem:n}=d(),r=c(),i=n("PUT",{id:e.id,onSuccess:()=>{r(l.SETTINGS.ACCOUNTS)}}),a=n("DELETE",{id:e.id,onSuccess:()=>{r(l.SETTINGS.ACCOUNTS)}});return s.jsxs("div",{children:[s.jsx(h,{text:"Редактирование счета",onDeleteButtonClick:()=>{confirm("Удалить счет? При наличии транзакций он будет помечен как неактивный")&&a.mutate({id:e.id})}}),s.jsxs(t,{name:"basic",labelCol:{span:8},layout:"vertical",wrapperCol:{span:16},initialValues:{initialValue:e.initialValue/100,isActive:e!=null&&e.id?e.isActive:!0,name:e!=null&&e.id?e.name:"",icon:e.icon},onFinish:o=>{i.mutate(o),r(l.SETTINGS.ACCOUNTS)},autoComplete:"off",children:[s.jsx(t.Item,{label:"Название",name:"name",rules:[{message:"Введите название счета",required:!0}],children:s.jsx(m,{})}),s.jsx(t.Item,{label:"Иконка",name:"icon",children:s.jsx(f,{})}),s.jsx(t.Item,{label:"Начальный остаток",name:"initialValue",rules:[{message:"Укажите начальный остаток",required:!0}],children:s.jsx(m,{})}),s.jsx(t.Item,{name:"isActive",valuePropName:"checked",children:s.jsx(I,{children:"Активен"})}),s.jsxs("span",{style:{marginLeft:10},children:["Остаток: ",u(e.rest)]}),s.jsx(t.Item,{wrapperCol:{offset:8,span:16},children:s.jsx(x,{type:"primary",htmlType:"submit",disabled:i.isLoading,children:"Сохранить"})})]}),i.isLoading&&s.jsx("div",{children:"Сохранение данных..."})]})},y=()=>{const e=p(),n=e!=null&&e.accountId?e==null?void 0:e.accountId:"",{useGetOne:r}=d(),{isFetching:i,isError:a,data:o}=r(n);return s.jsxs(s.Fragment,{children:[i&&s.jsx(j,{}),a&&!i&&s.jsx("div",{children:"Ошибка загрузки счета"}),!i&&!a&&o&&s.jsx(C,{account:o})]})};export{y as AccountPage,y as default};
