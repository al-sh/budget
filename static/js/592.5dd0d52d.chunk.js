"use strict";(self.webpackChunkbudget_react=self.webpackChunkbudget_react||[]).push([[592],{7592:function(e,n,t){t.r(n),t.d(n,{LoginPage:function(){return v}});var r=t(5861),a=t(7757),s=t.n(a),o=t(1299),i=t(2791),c=t(6871),u=t(1569),l=t(6987),d=t(4674),p=t(4829),h=t(135),f=t(4964),m=t(336),g=t(184),v=function(){var e=(0,l.a)(),n=(0,d.c)(),t=(0,c.s0)(),a=(0,i.useCallback)(function(){var a=(0,r.Z)(s().mark((function r(a){var i,c;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.send({data:a,endpoint:m.q.AUTH+"/password",method:"POST"});case 3:i=r.sent,console.log("response: ",i),n.setItem("token",i.token),n.setItem("userId",String(i.userId)),t(u._1.HOME),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),403===(null===r.t0||void 0===r.t0||null===(c=r.t0.response)||void 0===c?void 0:c.status)?o.Z.error({message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d/\u043f\u0430\u0440\u043e\u043b\u044c"}):o.Z.error({message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0436\u0435."});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}(),[e,t,n]),v=(0,i.useCallback)((function(e){console.log("Failed:",e)}),[]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{children:"Login"}),(0,g.jsx)("div",{style:{width:500},children:(0,g.jsxs)(p.Z,{name:"basic",labelCol:{span:8},layout:"vertical",wrapperCol:{span:16},initialValues:{login:"demo",password:"demo"},onFinish:a,onFinishFailed:v,autoComplete:"off",children:[(0,g.jsx)(p.Z.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"login",rules:[{message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",required:!0}],children:(0,g.jsx)(h.Z,{})}),(0,g.jsx)(p.Z.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0}],children:(0,g.jsx)(h.Z.Password,{})}),(0,g.jsx)(p.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,g.jsx)(f.Z,{type:"primary",htmlType:"submit",children:"\u0412\u0445\u043e\u0434"})})]})})]})};n.default=v},336:function(e,n,t){t.d(n,{q:function(){return r}});var r={ACCOUNTS:"accounts",AUTH:"auth",CATEGORIES:"categories",SYNC:"sync",STATISTICS:"statistics",TRANSACTIONS:"transactions"}},6987:function(e,n,t){t.d(n,{a:function(){return h}});var r=t(5861),a=t(5671),s=t(3144),o=t(7757),i=t.n(o),c=t(4569),u=t.n(c),l=t(4674),d=t(1569),p=function(){function e(){var n=this;(0,a.Z)(this,e),this.path="".concat(window.location.origin,"/api"),this.send=function(){var e=(0,r.Z)(i().mark((function e(t){var r,a,s,o,c,p,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.endpoint,a=t.method,s=t.data,o=t.query,c=t.isFile,p="".concat(n.path,"/").concat(r),h={Auth:(0,l.c)().getItem("token"),UserId:(0,l.c)().getItem("userId")},c&&(h["Content-Type"]="multipart/form-data"),e.abrupt("return",new Promise((function(e,n){u()({data:s,headers:h,method:a,params:o,url:p}).then((function(n){e(n.data)})).catch((function(e){var t;console.log(e.response),e.response&&401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(console.log("redirected to login"),window.location.href="".concat(window.location.origin).concat(d._1.SETTINGS.LOGIN)),n(e)}))})));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),console.log("ApiService create. path:",this.path)}return(0,s.Z)(e,null,[{key:"getInstance",value:function(){return e.instance||(console.log("ApiService - create"),e.instance=new e),e.instance}}]),e}();p.instance=void 0;var h=function(){return p.getInstance()}}}]);
//# sourceMappingURL=592.5dd0d52d.chunk.js.map