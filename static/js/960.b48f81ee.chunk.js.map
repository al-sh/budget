{"version":3,"file":"static/js/960.b48f81ee.chunk.js","mappings":"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","sources":["components/_shared/_base/Button.tsx","components/_shared/_base/DatePicker.tsx","components/_shared/_base/HeaderBlock.tsx","components/_shared/_base/HeaderTitle.tsx","components/_shared/_base/Select.tsx","components/_shared/buttons/FilterButton.svg","components/_shared/buttons/FilterButton.tsx","components/_shared/selects/AccountsSelect.tsx","hooks/useStatistics.ts","components/statistics/StatCategoriesList.tsx","components/_shared/_base/Checkbox.tsx","components/statistics/StatFilters.tsx","components/statistics/StatGraph/StatGrapChart.tsx","components/statistics/StatGraph/StatGraphRawData.tsx","components/statistics/StatGraph/StatGraph.tsx","components/statistics/StatisticsPage.tsx","constants/api-routes.ts","constants/formats.ts","services/Api.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-empty-interface */\r\nimport { Button as AntdButton, ButtonProps as AntdButtonProps } from 'antd';\r\nimport { CSSProperties } from 'react';\r\n\r\nexport interface ButtonProps extends AntdButtonProps {}\r\n\r\nexport const Button: React.VFC<ButtonProps> = ({ ...props }) => {\r\n  const style: CSSProperties = {\r\n    background: props.type === 'primary' ? 'linear-gradient(180deg, #008f8c 0%, #0fc2c0 100%)' : '',\r\n    border: 'none',\r\n  };\r\n  return <AntdButton {...props} style={style} />;\r\n};\r\n","import { DatePicker as AntdDatePicker, DatePickerProps as AntdDatePickerProps } from 'antd';\r\nimport { Moment } from 'moment';\r\nimport 'moment/locale/ru';\r\nimport locale from 'antd/es/date-picker/locale/ru_RU'; //если потребуется где-то еще - перейти на ConfigProvider из Antd\r\nimport { formats } from '../../../constants/formats';\r\n\r\nexport interface DatePickerProps {\r\n  withTime?: boolean;\r\n  value?: Moment;\r\n  placeholder?: string;\r\n  onChange?: AntdDatePickerProps['onChange'];\r\n}\r\n\r\nexport const DatePicker: React.VFC<DatePickerProps> = ({ withTime, onChange, value, placeholder }) => (\r\n  <AntdDatePicker\r\n    format={withTime ? formats.dateMoment.withTime : formats.dateMoment.short}\r\n    locale={locale}\r\n    showTime={withTime}\r\n    placeholder={placeholder || 'Выберите дату'}\r\n    value={value}\r\n    onChange={onChange}\r\n  />\r\n);\r\n","import styled from 'styled-components';\r\n\r\nexport const HeaderBlock = styled.div`\r\n  height: 64px;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background: linear-gradient(180deg, #008f8c 0%, #0fc2c0 100%);\r\n  border-radius: 0px 0px 5px 5px;\r\n  padding: 12px;\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const HeaderTitle = styled.div`\r\n  font-weight: 700;\r\n  font-size: 16px;\r\n  line-height: 19px;\r\n  color: ${({ theme }) => theme.text.header};\r\n`;\r\n","import { Select as AntdSelect } from 'antd';\r\nimport { ReactNode } from 'react';\r\n\r\ninterface Props {\r\n  allowClear?: boolean;\r\n  children?: ReactNode;\r\n  disabled?: boolean;\r\n  loading?: boolean;\r\n  value?: number;\r\n  onChange?: (newValue: number) => void;\r\n}\r\n\r\nexport const Select: React.FC<Props> = ({ allowClear, children, disabled, loading, value, onChange }) => {\r\n  return (\r\n    <AntdSelect allowClear={allowClear} disabled={disabled} loading={loading} value={value != 0 ? value : undefined} onChange={onChange}>\r\n      {children}\r\n    </AntdSelect>\r\n  );\r\n};\r\n\r\nexport const SelectOption: React.FC<{ value?: string | number }> = ({ children }) => <AntdSelect.Option>{children}</AntdSelect.Option>;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFilterButton(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30,\n    height: 24,\n    viewBox: \"0 0 30 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15 0.480003C13.815 0.480003 12.82 1.30251 12.5325 2.4H0.920002C0.690005 2.3975 0.475003 2.5175 0.357499 2.7175C0.242497 2.9175 0.242497 3.1625 0.357499 3.3625C0.474997 3.5625 0.689998 3.6825 0.920002 3.68H12.5325C12.82 4.77749 13.815 5.6 15 5.6C16.185 5.6 17.18 4.77749 17.4675 3.68H29.08C29.31 3.6825 29.525 3.5625 29.6425 3.3625C29.7575 3.1625 29.7575 2.9175 29.6425 2.7175C29.525 2.5175 29.31 2.3975 29.08 2.4H17.4675C17.18 1.30251 16.185 0.480003 15 0.480003V0.480003ZM15 1.76C15.695 1.76 16.2425 2.295 16.2725 2.98251C16.27 3.02 16.27 3.06 16.2725 3.1C16.2425 3.785 15.695 4.32 15 4.32C14.305 4.32 13.7575 3.785 13.7275 3.0975C13.73 3.06 13.73 3.02 13.7275 2.98C13.7575 2.295 14.305 1.76 15 1.76ZM23.96 9.44C22.775 9.44 21.78 10.2625 21.4925 11.36H0.920002C0.690005 11.3575 0.475003 11.4775 0.357499 11.6775C0.242497 11.8775 0.242497 12.1225 0.357499 12.3225C0.474997 12.5225 0.689998 12.6425 0.920002 12.64H21.4925C21.78 13.7375 22.775 14.56 23.96 14.56C25.145 14.56 26.14 13.7375 26.4275 12.64H29.08C29.31 12.6425 29.525 12.5225 29.6425 12.3225C29.7575 12.1225 29.7575 11.8775 29.6425 11.6775C29.525 11.4775 29.31 11.3575 29.08 11.36H26.4275C26.14 10.2625 25.145 9.44 23.96 9.44ZM23.96 10.72C24.655 10.72 25.2025 11.255 25.2325 11.9425C25.23 11.98 25.23 12.02 25.2325 12.06C25.2025 12.745 24.655 13.28 23.96 13.28C23.265 13.28 22.7175 12.745 22.6875 12.0575C22.69 12.02 22.69 11.98 22.6875 11.94C22.7175 11.255 23.265 10.72 23.96 10.72ZM7.96 18.4C6.775 18.4 5.78 19.2225 5.4925 20.32H0.920002C0.690005 20.3175 0.475003 20.4375 0.357499 20.6375C0.242497 20.8375 0.242497 21.0825 0.357499 21.2825C0.474997 21.4825 0.689998 21.6025 0.920002 21.6H5.4925C5.78 22.6975 6.775 23.52 7.96 23.52C9.145 23.52 10.14 22.6975 10.4275 21.6H29.08C29.31 21.6025 29.525 21.4825 29.6425 21.2825C29.7575 21.0825 29.7575 20.8375 29.6425 20.6375C29.525 20.4375 29.31 20.3175 29.08 20.32H10.4275C10.14 19.2225 9.145 18.4 7.96 18.4ZM7.96 19.68C8.655 19.68 9.2025 20.215 9.2325 20.9025C9.23 20.94 9.23 20.98 9.2325 21.02C9.2025 21.705 8.655 22.24 7.96 22.24C7.265 22.24 6.7175 21.705 6.6875 21.0175C6.69 20.98 6.69 20.94 6.6875 20.9C6.71751 20.215 7.265 19.68 7.96 19.68Z\",\n    fill: \"white\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFilterButton);\nexport default __webpack_public_path__ + \"static/media/FilterButton.0469a70f86337398159d9b026a36e8e7.svg\";\nexport { ForwardRef as ReactComponent };","import styled from 'styled-components';\r\nimport { ReactComponent as FilterButtonSVG } from './FilterButton.svg';\r\n\r\nconst FilterButtonWrapper = styled.div`\r\n  cursor: pointer;\r\n  position: relative;\r\n`;\r\n\r\nconst Counter = styled.span`\r\n  position: absolute;\r\n  height: 16px;\r\n  width: 16px;\r\n  padding-left: 4px;\r\n  bottom: 0px;\r\n  right: -5px;\r\n  border-radius: 8px;\r\n  line-height: 18px;\r\n  background-color: ${({ theme }) => theme.background.main};\r\n  color: ${({ theme }) => theme.text.active};\r\n`;\r\n\r\nexport const FilterButton: React.VFC<{ filtersCount?: number; onClick: () => void; showFilters: boolean }> = ({\r\n  showFilters,\r\n  onClick,\r\n  filtersCount,\r\n}) => (\r\n  <FilterButtonWrapper>\r\n    <FilterButtonSVG onClick={onClick}>{showFilters ? 'Скрыть фильтры' : 'Показать фильтры'}</FilterButtonSVG>\r\n    {!!filtersCount && <Counter>{filtersCount}</Counter>}\r\n  </FilterButtonWrapper>\r\n);\r\n","import { useAccounts } from '../../../hooks/useAccounts';\r\nimport { Select, SelectOption } from '../_base/Select';\r\n\r\ninterface Props {\r\n  allowClear?: boolean;\r\n  value?: number;\r\n  onChange?: (newValue: number) => void;\r\n}\r\n\r\nexport const AccountsSelect: React.VFC<Props> = ({ allowClear, value, onChange }) => {\r\n  const { isLoading: isAccountsLoading, data: accounts } = useAccounts().useGetAccountsList(false);\r\n\r\n  return (\r\n    <Select loading={isAccountsLoading} allowClear={allowClear} value={value} onChange={onChange}>\r\n      {accounts?.map((acc) => (\r\n        <SelectOption key={acc.id} value={acc.id}>\r\n          {acc.name}\r\n        </SelectOption>\r\n      ))}\r\n    </Select>\r\n  );\r\n};\r\n","import { Moment } from 'moment';\r\nimport { useQuery } from 'react-query';\r\nimport { API_ROUTES } from '../constants/api-routes';\r\nimport { formats } from '../constants/formats';\r\nimport { ICategoryStatItem } from '../server/entity/Category';\r\nimport { GetMonthStat, GetStatTree, MonthlyStatCategory } from '../server/routes/statistics';\r\nimport { ETRANSACTION_TYPE } from '../server/types/transactions';\r\nimport { getApi } from '../services/Api';\r\n\r\nexport interface GetStatTreeFormParams {\r\n  dateFrom?: Moment;\r\n  dateEnd?: Moment;\r\n  showHidden?: boolean;\r\n  typeId?: ETRANSACTION_TYPE;\r\n}\r\n\r\nexport interface GetMonthStatParams {\r\n  dateFrom?: Moment;\r\n  dateEnd?: Moment;\r\n  showHidden?: boolean;\r\n  typeId?: ETRANSACTION_TYPE;\r\n  categoryIds?: string[];\r\n}\r\n\r\nexport const statQueryKey = 'statistics';\r\n\r\nexport const useStatistics = () => {\r\n  const api = getApi();\r\n\r\n  const useGetTree = (params: GetStatTreeFormParams) => {\r\n    const { dateFrom, dateEnd, typeId, showHidden } = params;\r\n    const query: GetStatTree['query'] = {};\r\n\r\n    if (dateFrom?.isValid()) {\r\n      query.dateFrom = dateFrom.format(formats.dateMoment.short);\r\n    }\r\n\r\n    if (dateEnd?.isValid()) {\r\n      query.dateEnd = dateEnd.format(formats.dateMoment.short);\r\n    }\r\n\r\n    query.showHidden = showHidden ? '1' : '0';\r\n    query.typeId = String(typeId);\r\n\r\n    return useQuery([statQueryKey, 'tree', JSON.stringify(query)], () =>\r\n      api.send<ICategoryStatItem[], null, GetStatTree['query']>({\r\n        endpoint: API_ROUTES.STATISTICS + '/tree',\r\n        method: 'GET',\r\n        query: query,\r\n      })\r\n    );\r\n  };\r\n\r\n  const useGraph = (params: GetMonthStatParams) => {\r\n    const { dateFrom, dateEnd, typeId, showHidden } = params;\r\n    const query: GetMonthStat['query'] = {};\r\n\r\n    if (dateFrom?.isValid()) {\r\n      query.dateFrom = dateFrom.format(formats.dateMoment.short);\r\n    }\r\n\r\n    if (dateEnd?.isValid()) {\r\n      query.dateEnd = dateEnd.format(formats.dateMoment.short);\r\n    }\r\n\r\n    query.showHidden = showHidden ? '1' : '0';\r\n    query.typeId = String(typeId);\r\n\r\n    const categoryIds = params.categoryIds;\r\n    if (categoryIds) {\r\n      query.categoryIds = categoryIds.join(',');\r\n    }\r\n\r\n    return useQuery([statQueryKey, 'graph', JSON.stringify(query)], () =>\r\n      api.send<MonthlyStatCategory[], null, GetMonthStat['query']>({\r\n        endpoint: API_ROUTES.STATISTICS + '/graph',\r\n        method: 'GET',\r\n        query: query,\r\n      })\r\n    );\r\n  };\r\n\r\n  return { useGetTree, useGraph };\r\n};\r\n","import { Tree } from 'antd';\r\nimport styled from 'styled-components';\r\nimport { ICategoryStatItem } from '../../server/entity/Category';\r\nimport { formatMoney, formatPercent } from '../../utils/format';\r\n\r\nconst CategoriesListWrapper = styled.div`\r\n  margin-bottom: 1em;\r\n\r\n  .ant-tree .ant-tree-node-content-wrapper {\r\n    cursor: default;\r\n  }\r\n\r\n  .ant-tree-list {\r\n    background-color: ${({ theme }) => theme.background.main};\r\n\r\n    .ant-tree-switcher {\r\n      color: ${({ theme }) => theme.text.primary};\r\n    }\r\n  }\r\n`;\r\n\r\nconst StatTreeItem = styled.div`\r\n  background-color: ${({ theme }) => theme.background.main};\r\n`;\r\n\r\nconst CategoryName = styled.span<{ active: boolean }>`\r\n  display: inline-block;\r\n  width: 150px;\r\n  color: ${({ theme, active }) => (active ? theme.text.primary : theme.text.inactive)};\r\n`;\r\n\r\nconst Amount = styled.span`\r\n  margin-left: 10px;\r\n  color: green;\r\n`;\r\n\r\nexport const StatCategoriesList: React.VFC<{ categoriesTree: ICategoryStatItem[]; onSelect?: (selectedIds: string[]) => void }> = ({\r\n  categoriesTree,\r\n  onSelect,\r\n}) => {\r\n  return (\r\n    <>\r\n      <CategoriesListWrapper>\r\n        <Tree\r\n          treeData={categoriesTree}\r\n          selectable={true}\r\n          multiple\r\n          onSelect={(selectedIds) => onSelect && onSelect(selectedIds.map((item) => String(item)))}\r\n          titleRender={(item) => (\r\n            <StatTreeItem>\r\n              <CategoryName active={!!item.isActive}>{item.title}</CategoryName>\r\n              <Amount>\r\n                {formatMoney(item.totalAmount)} ({formatPercent(item.share)}%)\r\n              </Amount>\r\n            </StatTreeItem>\r\n          )}\r\n        />\r\n      </CategoriesListWrapper>\r\n    </>\r\n  );\r\n};\r\n","import { Checkbox as AntdCheckbox, CheckboxProps as AntdCheckboxProps } from 'antd';\r\nimport 'moment/locale/ru';\r\n\r\nexport interface CheckboxProps {\r\n  value?: boolean;\r\n  onChange?: AntdCheckboxProps['onChange'];\r\n}\r\n\r\nexport const Checkbox: React.VFC<CheckboxProps> = ({ onChange, value }) => <AntdCheckbox checked={value} onChange={onChange} />;\r\n","import { Form } from 'antd';\r\nimport moment from 'moment';\r\nimport { useState } from 'react';\r\nimport { GetStatTreeFormParams } from '../../hooks/useStatistics';\r\nimport { AccountsSelect } from '../_shared/selects/AccountsSelect';\r\nimport { Button } from '../_shared/_base/Button';\r\nimport { Checkbox } from '../_shared/_base/Checkbox';\r\nimport { DatePicker } from '../_shared/_base/DatePicker';\r\n\r\nexport const StatFilters: React.VFC<{\r\n  onClear: () => void;\r\n  onFinish: (params: GetStatTreeFormParams) => void;\r\n  params: GetStatTreeFormParams;\r\n}> = ({ params, onClear, onFinish }) => {\r\n  const [form] = Form.useForm();\r\n\r\n  const [isSubmitDisabled, setisSubmitDisabled] = useState(false);\r\n\r\n  return (\r\n    <div>\r\n      <Form\r\n        name=\"StatFilters\"\r\n        form={form}\r\n        onValuesChange={() => {\r\n          setisSubmitDisabled(form.getFieldsError().filter(({ errors }) => errors.length).length > 0);\r\n        }}\r\n        layout=\"horizontal\"\r\n        labelAlign=\"left\"\r\n        initialValues={params}\r\n        onFinish={(formValues) => {\r\n          onFinish(formValues);\r\n        }}\r\n        autoComplete=\"off\"\r\n      >\r\n        <div style={{ marginTop: 20, display: 'flex', alignItems: 'baseline' }}>\r\n          <Form.Item name=\"dateFrom\" style={{ display: 'inline-block' }}>\r\n            <DatePicker placeholder=\"Начало периода\" />\r\n          </Form.Item>\r\n          <span style={{ margin: '0 12px 0 12px' }}>-</span>\r\n          <Form.Item name=\"dateEnd\" style={{ display: 'inline-block' }}>\r\n            <DatePicker placeholder=\"Конец периода\" />\r\n          </Form.Item>\r\n          <Button\r\n            onClick={() => {\r\n              form.setFieldsValue({ dateFrom: moment('20220101'), dateEnd: moment('20221130') });\r\n            }}\r\n          >\r\n            Год\r\n          </Button>\r\n          <Button\r\n            onClick={() => {\r\n              form.setFieldsValue({ dateFrom: moment('20220701'), dateEnd: moment('20221130') });\r\n            }}\r\n          >\r\n            Полугодие\r\n          </Button>\r\n        </div>\r\n\r\n        <Form.Item label=\"Счет\" name=\"accountId\">\r\n          <AccountsSelect allowClear />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Показать скрытые\" name=\"showHidden\">\r\n          <Checkbox\r\n            onChange={(e) => {\r\n              form.setFieldsValue({ showHidden: e.target.checked });\r\n            }}\r\n          />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          wrapperCol={{\r\n            offset: 8,\r\n            span: 16,\r\n          }}\r\n        >\r\n          <Button\r\n            type=\"link\"\r\n            onClick={() => {\r\n              onClear();\r\n            }}\r\n          >\r\n            Очистить\r\n          </Button>\r\n          <Button type=\"primary\" htmlType=\"submit\" disabled={isSubmitDisabled}>\r\n            Применить\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n","import { CartesianGrid, Legend, Line, LineChart, ResponsiveContainer, Tooltip, XAxis, YAxis } from 'recharts';\r\nimport { MonthlyStatCategory } from '../../../server/routes/statistics';\r\nimport { formatMoneyShort } from '../../../utils/format';\r\n\r\nfunction getRandomColor() {\r\n  const letters = '0123456789ABCDEF';\r\n  let color = '#';\r\n  for (let i = 0; i < 6; i++) {\r\n    color += letters[Math.floor(Math.random() * 16)];\r\n  }\r\n  return color;\r\n}\r\n\r\nexport const StatGraphChart: React.VFC<{ statCategories: MonthlyStatCategory[] }> = ({ statCategories }) => {\r\n  const getChartItem = (statItem: MonthlyStatCategory) =>\r\n    statItem.data.map((item) => ({ name: item.period, [statItem.category.name as string]: item.amount / 100 }));\r\n\r\n  const chartDataFlatted = statCategories.map((statItem) => getChartItem(statItem)).flat();\r\n\r\n  const chartDataMap = new Map();\r\n  for (let i = 0; i < chartDataFlatted.length; i++) {\r\n    const mapKey = chartDataFlatted[i].name;\r\n    const mapItem = chartDataMap.get(mapKey);\r\n    if (!mapItem) {\r\n      chartDataMap.set(mapKey, chartDataFlatted[i]);\r\n    } else {\r\n      chartDataMap.set(mapKey, { ...mapItem, ...chartDataFlatted[i] });\r\n    }\r\n  }\r\n  const chartDataValues = [...chartDataMap.values()];\r\n  const chartDataKeys = statCategories.map((statItem) => statItem.category.name);\r\n\r\n  return (\r\n    <div style={{ height: 600, marginLeft: -30 }}>\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <LineChart\r\n          height={600}\r\n          data={chartDataValues}\r\n          margin={{\r\n            top: 5,\r\n            right: 30,\r\n            left: 20,\r\n            bottom: 5,\r\n          }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"name\" />\r\n          <YAxis tickFormatter={(value) => formatMoneyShort(value)} />\r\n          <Tooltip />\r\n          <Legend />\r\n          {chartDataKeys.map((item) => (\r\n            <Line key={item} type=\"monotone\" dataKey={item} stroke={getRandomColor()} />\r\n          ))}\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n","import { useState } from 'react';\r\nimport { MonthlyStatCategory } from '../../../server/routes/statistics';\r\nimport { formatMoney } from '../../../utils/format';\r\nimport { Button } from '../../_shared/_base/Button';\r\n\r\nexport const StatGraphRawData: React.VFC<{ statCategories: MonthlyStatCategory[] }> = ({ statCategories }) => {\r\n  const [showData, setShowData] = useState(false);\r\n  return (\r\n    <div>\r\n      {!showData && (\r\n        <Button\r\n          onClick={() => {\r\n            setShowData(true);\r\n          }}\r\n        >\r\n          Показать данные\r\n        </Button>\r\n      )}\r\n      <div>\r\n        {showData &&\r\n          statCategories?.length > 0 &&\r\n          statCategories?.map((item) => (\r\n            <div key={item.category.id}>\r\n              <div>{item.category.name}</div>\r\n              <div>\r\n                {item.data.map((item) => (\r\n                  <div key={item.period}>\r\n                    <span>{item.period}</span>\r\n                    <span style={{ marginLeft: 20 }}>{formatMoney(item.amount)}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { GetStatTreeFormParams, useStatistics } from '../../../hooks/useStatistics';\r\nimport { Category } from '../../../server/entity/Category';\r\nimport { Loader } from '../../_shared/Loader';\r\n\r\nimport { StatGraphChart } from './StatGrapChart';\r\nimport { StatGraphRawData } from './StatGraphRawData';\r\n\r\nexport const StatGraph: React.VFC<{ filterParams: GetStatTreeFormParams; selectedCategories: Category['id'][] }> = ({\r\n  filterParams,\r\n  selectedCategories,\r\n}) => {\r\n  const { useGraph } = useStatistics();\r\n  const { isLoading, isError, data: statCategories } = useGraph({ ...filterParams, categoryIds: selectedCategories });\r\n\r\n  if (isLoading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  if (isError) {\r\n    return <div>useGraph error</div>;\r\n  }\r\n\r\n  if (!statCategories) {\r\n    return <></>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <StatGraphChart statCategories={statCategories} />\r\n      <StatGraphRawData statCategories={statCategories} />\r\n    </div>\r\n  );\r\n};\r\n","import { Tabs } from 'antd';\r\nimport moment from 'moment';\r\nimport React, { useState } from 'react';\r\nimport { GetStatTreeFormParams, useStatistics } from '../../hooks/useStatistics';\r\nimport { Category } from '../../server/entity/Category';\r\nimport { ETRANSACTION_TYPE } from '../../server/types/transactions';\r\nimport { FilterButton } from '../_shared/buttons/FilterButton';\r\nimport { Loader } from '../_shared/Loader';\r\nimport { HeaderBlock } from '../_shared/_base/HeaderBlock';\r\nimport { HeaderTitle } from '../_shared/_base/HeaderTitle';\r\nimport { StatCategoriesList } from './StatCategoriesList';\r\nimport { StatFilters } from './StatFilters';\r\nimport { StatGraph } from './StatGraph/StatGraph';\r\n\r\nexport const StatisticsPage: React.VFC = () => {\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  const dateFrom = new Date();\r\n  dateFrom.setMonth(dateFrom.getMonth() - 6);\r\n  dateFrom.setDate(1);\r\n\r\n  const dateEnd = new Date();\r\n  dateEnd.setDate(0);\r\n\r\n  const [filterParams, setFilterParams] = useState<GetStatTreeFormParams>({\r\n    typeId: ETRANSACTION_TYPE.EXPENSE,\r\n    showHidden: false,\r\n    dateFrom: moment(dateFrom),\r\n    dateEnd: moment(dateEnd),\r\n  });\r\n  const [selectedCategories, setSelectedCategories] = useState<Category['id'][] | undefined>(undefined);\r\n\r\n  const { useGetTree } = useStatistics();\r\n\r\n  const { isLoading, isError, data: categoriesTree } = useGetTree(filterParams);\r\n\r\n  let filtersCount = 0;\r\n  for (const key in filterParams) {\r\n    if (key !== 'typeId' && filterParams[key as keyof GetStatTreeFormParams]) {\r\n      filtersCount++;\r\n    }\r\n  }\r\n\r\n  if (isError) return <>Error</>;\r\n\r\n  return (\r\n    <>\r\n      <HeaderBlock>\r\n        <HeaderTitle>Статистика по категориям</HeaderTitle>\r\n        <FilterButton\r\n          onClick={() => {\r\n            setShowFilters(!showFilters);\r\n          }}\r\n          showFilters={showFilters}\r\n          filtersCount={filtersCount}\r\n        />\r\n      </HeaderBlock>\r\n      {showFilters && (\r\n        <StatFilters\r\n          params={filterParams}\r\n          onClear={() => {\r\n            setShowFilters(false);\r\n            setFilterParams({ ...{} });\r\n          }}\r\n          onFinish={(params) => {\r\n            setShowFilters(false);\r\n            setFilterParams({ ...filterParams, ...params });\r\n          }}\r\n        />\r\n      )}\r\n      <Tabs\r\n        activeKey={String(filterParams.typeId)}\r\n        onChange={(activeKey) => {\r\n          setFilterParams({ ...filterParams, typeId: parseInt(activeKey) });\r\n        }}\r\n      >\r\n        <Tabs.TabPane tab=\"Расходы\" key={String(ETRANSACTION_TYPE.EXPENSE)} />\r\n        <Tabs.TabPane tab=\"Доходы\" key={String(ETRANSACTION_TYPE.INCOME)} />\r\n      </Tabs>\r\n      {isLoading && <Loader />}\r\n      {categoriesTree && !isLoading && (\r\n        <StatCategoriesList categoriesTree={categoriesTree} onSelect={(selectedIds) => setSelectedCategories(selectedIds)} />\r\n      )}\r\n      {selectedCategories && <StatGraph filterParams={filterParams} selectedCategories={selectedCategories} />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default StatisticsPage;\r\n","export const API_ROUTES = {\r\n  ACCOUNTS: 'accounts',\r\n  AUTH: 'auth',\r\n  CATEGORIES: 'categories',\r\n  SYNC: 'sync',\r\n  STATISTICS: 'statistics',\r\n  TRANSACTIONS: 'transactions',\r\n};\r\n","export const formats = {\r\n  date: { short: 'yyyy-MM-dd', withTime: 'YYYY-MM-dd HH:mm', time: 'HH:mm' },\r\n  dateMoment: { short: 'yyyy-MM-DD', withTime: 'YYYY-MM-DD HH:mm' }, //todo: пока придется поддерживать 2 формата, далее убрать зависимость от Moment переходом на другие пикеры либо https://ant.design/docs/react/replace-moment\r\n};\r\n","import axios, { AxiosError, AxiosPromise, AxiosRequestHeaders } from 'axios';\r\nimport { getStorage } from './Storage';\r\nimport { UI_ROUTES } from '../constants/urls';\r\n\r\ninterface ApiRequest<ReqBody, ReqQuery> {\r\n  endpoint: string;\r\n  method: 'GET' | 'POST' | 'PUT' | 'DELETE';\r\n  data?: ReqBody;\r\n  query?: ReqQuery;\r\n  isFile?: boolean;\r\n}\r\n\r\nexport type ApiResponse<T = Record<string, unknown>> = AxiosPromise<T>;\r\n\r\nexport class ApiService {\r\n  private static instance: ApiService;\r\n\r\n  public static getInstance(): ApiService {\r\n    if (!ApiService.instance) {\r\n      console.log('ApiService - create');\r\n      ApiService.instance = new ApiService();\r\n    }\r\n\r\n    return ApiService.instance;\r\n  }\r\n\r\n  private constructor() {\r\n    console.log('ApiService create. path:', this.path);\r\n  }\r\n\r\n  private path = `${window.location.origin}/api`;\r\n\r\n  public send: <Result, RequestBody = null, RequestQuery = null>(request: ApiRequest<RequestBody, RequestQuery>) => Promise<Result> =\r\n    async (request) => {\r\n      const { endpoint, method, data, query, isFile } = request;\r\n      const url = `${this.path}/${endpoint}`;\r\n\r\n      const headers: AxiosRequestHeaders = { Auth: getStorage().getItem('token'), UserId: getStorage().getItem('userId') };\r\n      if (isFile) {\r\n        headers['Content-Type'] = 'multipart/form-data';\r\n      }\r\n\r\n      return new Promise((resolve, reject) => {\r\n        axios({\r\n          data,\r\n          headers: headers,\r\n          method,\r\n          params: query,\r\n          url,\r\n        })\r\n          .then((response) => {\r\n            resolve(response.data);\r\n          })\r\n          .catch((error: AxiosError) => {\r\n            console.log(error.response);\r\n            if (error.response && error.response?.status === 401) {\r\n              console.log('redirected to login');\r\n              window.location.href = `${window.location.origin}${UI_ROUTES.SETTINGS.LOGIN}`;\r\n            }\r\n            reject(error);\r\n          });\r\n      });\r\n    };\r\n}\r\n\r\nexport const getApi = () => ApiService.getInstance();\r\n"],"names":["Button","props","style","background","type","border","DatePicker","withTime","onChange","value","placeholder","format","formats","locale","showTime","HeaderBlock","styled","HeaderTitle","theme","text","header","Select","allowClear","children","disabled","loading","undefined","SelectOption","_path","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgFilterButton","_ref","svgRef","title","titleId","width","height","viewBox","fill","xmlns","ref","id","d","ForwardRef","FilterButtonWrapper","Counter","main","active","FilterButton","showFilters","onClick","filtersCount","AccountsSelect","useAccounts","useGetAccountsList","isAccountsLoading","isLoading","accounts","data","map","acc","name","statQueryKey","useStatistics","api","getApi","useGetTree","params","dateFrom","dateEnd","typeId","showHidden","query","isValid","String","useQuery","JSON","stringify","send","endpoint","API_ROUTES","method","useGraph","categoryIds","join","CategoriesListWrapper","primary","StatTreeItem","CategoryName","inactive","Amount","StatCategoriesList","categoriesTree","onSelect","treeData","selectable","multiple","selectedIds","item","titleRender","isActive","formatMoney","totalAmount","formatPercent","share","Checkbox","checked","StatFilters","onClear","onFinish","Form","form","useState","isSubmitDisabled","setisSubmitDisabled","onValuesChange","getFieldsError","filter","errors","layout","labelAlign","initialValues","formValues","autoComplete","marginTop","display","alignItems","margin","setFieldsValue","moment","label","e","wrapperCol","offset","span","htmlType","getRandomColor","color","Math","floor","random","StatGraphChart","statCategories","chartDataFlatted","statItem","period","category","amount","getChartItem","flat","chartDataMap","Map","mapKey","mapItem","get","set","chartDataValues","values","chartDataKeys","marginLeft","ResponsiveContainer","LineChart","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","tickFormatter","formatMoneyShort","Tooltip","Legend","Line","stroke","StatGraphRawData","showData","setShowData","StatGraph","filterParams","selectedCategories","isError","Loader","StatisticsPage","setShowFilters","Date","setMonth","getMonth","setDate","ETRANSACTION_TYPE","setFilterParams","setSelectedCategories","activeKey","parseInt","tab","ACCOUNTS","AUTH","CATEGORIES","SYNC","STATISTICS","TRANSACTIONS","date","short","time","dateMoment","ApiService","path","window","location","origin","request","isFile","url","headers","Auth","getStorage","getItem","UserId","Promise","resolve","reject","axios","then","response","catch","error","console","log","status","href","UI_ROUTES","instance","getInstance"],"sourceRoot":""}